<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentación del Proyecto - Gestor de Identidades</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f4f4f4;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #34495e;
            margin-top: 30px;
            margin-bottom: 15px;
            padding-left: 10px;
            border-left: 4px solid #3498db;
        }
        
        h3 {
            color: #7f8c8d;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 20px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        
        .code-block {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 10px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        
        .feature-list {
            list-style-type: none;
            padding-left: 0;
        }
        
        .feature-list li {
            background-color: #e8f4fd;
            padding: 10px;
            margin: 5px 0;
            border-left: 3px solid #3498db;
            border-radius: 3px;
        }
        
        .warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-left: 4px solid #fdcb6e;
            padding: 15px;
            margin: 15px 0;
            border-radius: 3px;
        }
        
        .success {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 3px;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        .table th, .table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        .table th {
            background-color: #3498db;
            color: white;
        }
        
        .table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #3498db;
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 20px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -34px;
            top: 5px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #3498db;
            border: 2px solid white;
        }
        
        .tag {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 0.8em;
            margin: 0 3px;
        }
        
        .tag.ejb { background-color: #e74c3c; }
        .tag.servlet { background-color: #f39c12; }
        .tag.jsf { background-color: #9b59b6; }
        .tag.cdi { background-color: #27ae60; }
        .tag.dao { background-color: #2980b9; }
    </style>
</head>
<body>
    <div class="container">
        <h1>📋 Documentación del Proyecto: Gestor de Identidades de Trabajadores de la Salud</h1>
        
        <div class="section">
            <h2>🎯 Descripción General</h2>
            <p>Este proyecto implementa un sistema de gestión de identidades para trabajadores de la salud utilizando Java EE con las siguientes tecnologías:</p>
            <ul class="feature-list">
                <li>Jakarta EE 10</li>
                <li>EJB 4.0 (Enterprise JavaBeans)</li>
                <li>Servlets 6.1</li>
                <li>CDI (Contexts and Dependency Injection)</li>
                <li>JSF 4.0 (JavaServer Faces)</li>
                <li>PrimeFaces 13.0 para componentes AJAX</li>
                <li>WildFly 29.0.1 como servidor de aplicaciones</li>
            </ul>
        </div>

        <div class="section">
            <h2>📁 Estructura del Proyecto</h2>
            <div class="code-block">
GestorIdentidades/
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── com/ejercicio1/
│   │   │       ├── entities/          <span class="tag">Entidades</span>
│   │   │       │   └── TrabajadorSalud.java
│   │   │       ├── dao/               <span class="tag dao">DAO</span>
│   │   │       │   ├── TrabajadorSaludDAO.java
│   │   │       │   ├── TrabajadorSaludDAOLocal.java
│   │   │       │   └── TrabajadorSaludDAORemote.java
│   │   │       ├── business/          <span class="tag ejb">EJB</span>
│   │   │       │   ├── TrabajadorSaludService.java
│   │   │       │   ├── TrabajadorSaludServiceLocal.java
│   │   │       │   ├── TrabajadorSaludServiceRemote.java
│   │   │       │   ├── EstadisticasSistema.java
│   │   │       │   └── BusinessException.java
│   │   │       ├── gestoridentidades/ <span class="tag servlet">Servlets</span>
│   │   │       │   ├── AgregarTrabajadorServlet.java
│   │   │       │   ├── ListarTrabajadorServlet.java
│   │   │       │   └── ApiTrabajadoresServlet.java
│   │   │       └── cliente/           <span class="tag">Cliente Remoto</span>
│   │   │           └── ClienteRemoto.java
│   │   ├── resources/
│   │   │   └── META-INF/
│   │   │       └── beans.xml          <span class="tag cdi">CDI</span>
│   │   └── webapp/
│   │       └── WEB-INF/
│   │           ├── web.xml            <span class="tag jsf">JSF Config</span>
│   │           └── faces-config.xml   <span class="tag jsf">JSF Config</span>
│   └── test/
└── pom.xml
            </div>
        </div>

        <div class="section">
            <h2>🔧 Configuraciones Realizadas</h2>
            
            <h3>1. Configuración de Maven (pom.xml)</h3>
            <div class="success">
                <strong>✅ Dependencias agregadas:</strong>
                <ul>
                    <li>Jakarta EE APIs (EJB, Servlet, CDI)</li>
                    <li>Jersey para REST API</li>
                    <li>WildFly Client Libraries para EJB Remoto</li>
                    <li>JSF 4.0 API</li>
                    <li>PrimeFaces 13.0 con clasificador Jakarta</li>
                    <li>PrimeFaces Themes</li>
                </ul>
            </div>

            <h3>2. Configuración del Servidor WildFly</h3>
            <div class="code-block">
# Configuración del DataSource (ejecutado en JBoss CLI)
data-source add --name=GestorIdentidadesDS \
    --jndi-name=java:/GestorIdentidadesDS \
    --driver-name=h2 \
    --connection-url=jdbc:h2:mem:gestoridentidades;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE \
    --user-name=sa \
    --password=sa
            </div>
            
            <div class="warning">
                <strong>⚠️ Nota:</strong> El DataSource utiliza H2 en memoria. Para producción, cambiar a una base de datos persistente.
            </div>

            <h3>3. Deployment en WildFly</h3>
            <div class="timeline">
                <div class="timeline-item">
                    <strong>Paso 1:</strong> Compilación del proyecto
                    <div class="code-block">mvn clean package</div>
                </div>
                <div class="timeline-item">
                    <strong>Paso 2:</strong> Copia del WAR al directorio de deployment
                    <div class="code-block">copy target\GestorIdentidades-1.0-SNAPSHOT.war %WILDFLY_HOME%\standalone\deployments\</div>
                </div>
                <div class="timeline-item">
                    <strong>Paso 3:</strong> Verificación del deployment
                    <ul>
                        <li>Archivo .deployed creado automáticamente</li>
                        <li>Logs sin errores en server.log</li>
                        <li>Aplicación accesible en http://localhost:8080/GestorIdentidades-1.0-SNAPSHOT/</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🎨 Implementación de JSF con PrimeFaces</h2>
            
            <h3>Configuración en web.xml</h3>
            <div class="code-block">
&lt;!-- Servlet de JSF --&gt;
&lt;servlet&gt;
    &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
    &lt;servlet-class&gt;jakarta.faces.webapp.FacesServlet&lt;/servlet-class&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;

&lt;!-- Mapeo de URLs --&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Faces Servlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.xhtml&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;

&lt;!-- Configuración del tema de PrimeFaces --&gt;
&lt;context-param&gt;
    &lt;param-name&gt;primefaces.THEME&lt;/param-name&gt;
    &lt;param-value&gt;saga-blue&lt;/param-value&gt;
&lt;/context-param&gt;
            </div>

            <h3>Características de PrimeFaces Implementadas</h3>
            <ul class="feature-list">
                <li>DataTable con filtros y paginación AJAX</li>
                <li>Formularios con validación en tiempo real</li>
                <li>Diálogos modales para confirmaciones</li>
                <li>Gráficos para estadísticas del sistema</li>
                <li>Tema moderno Saga-Blue</li>
                <li>Integración con Font Awesome para iconos</li>
            </ul>
        </div>

        <div class="section">
            <h2>📊 Componentes del Sistema</h2>
            
            <table class="table">
                <thead>
                    <tr>
                        <th>Componente</th>
                        <th>Tipo</th>
                        <th>Descripción</th>
                        <th>Tecnología</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>TrabajadorSalud</td>
                        <td><span class="tag">Entity</span></td>
                        <td>Entidad principal con los datos del trabajador</td>
                        <td>POJO Serializable</td>
                    </tr>
                    <tr>
                        <td>TrabajadorSaludDAO</td>
                        <td><span class="tag dao">DAO</span></td>
                        <td>Acceso a datos con operaciones CRUD</td>
                        <td>EJB Stateless</td>
                    </tr>
                    <tr>
                        <td>TrabajadorSaludService</td>
                        <td><span class="tag ejb">Business</span></td>
                        <td>Lógica de negocio y validaciones</td>
                        <td>EJB Stateless</td>
                    </tr>
                    <tr>
                        <td>Servlets</td>
                        <td><span class="tag servlet">Web</span></td>
                        <td>Endpoints HTTP para operaciones</td>
                        <td>Jakarta Servlet</td>
                    </tr>
                    <tr>
                        <td>Managed Beans</td>
                        <td><span class="tag jsf">JSF</span></td>
                        <td>Controladores para las vistas JSF</td>
                        <td>CDI + JSF</td>
                    </tr>
                    <tr>
                        <td>XHTML Pages</td>
                        <td><span class="tag jsf">View</span></td>
                        <td>Páginas web con componentes PrimeFaces</td>
                        <td>Facelets + PrimeFaces</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>🚀 Próximos Pasos</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <strong>Crear faces-config.xml</strong> - Configuración de navegación JSF
                </div>
                <div class="timeline-item">
                    <strong>Implementar Managed Beans</strong> - TrabajadorBean y EstadisticasBean
                </div>
                <div class="timeline-item">
                    <strong>Crear Template Principal</strong> - Layout maestro con PrimeFaces
                </div>
                <div class="timeline-item">
                    <strong>Desarrollar Páginas XHTML</strong>
                    <ul>
                        <li>Listado de trabajadores con DataTable</li>
                        <li>Formulario de registro con validaciones AJAX</li>
                        <li>Búsqueda por cédula y especialidad</li>
                        <li>Dashboard de estadísticas con gráficos</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>⚙️ Comandos Útiles</h2>
            <div class="code-block">
# Compilar el proyecto
mvn clean compile

# Empaquetar como WAR
mvn clean package

# Ejecutar tests
mvn test

# Iniciar WildFly
%WILDFLY_HOME%\bin\standalone.bat

# Acceder a la consola de administración
http://localhost:9990

# URL de la aplicación
http://localhost:8080/GestorIdentidades-1.0-SNAPSHOT/
            </div>
        </div>

        <div class="section">
            <h2>📝 Notas de Desarrollo</h2>
            <div class="warning">
                <strong>Consideraciones importantes:</strong>
                <ul>
                    <li>El proyecto está en modo Development para facilitar el debugging</li>
                    <li>La base de datos H2 es en memoria (se pierde al reiniciar)</li>
                    <li>Los EJBs están configurados para acceso local y remoto</li>
                    <li>PrimeFaces está configurado con el tema Saga-Blue</li>
                    <li>Se habilitó Font Awesome para iconos en la interfaz</li>
                </ul>
            </div>
        </div>

        <div class="section" style="text-align: center; background-color: #2c3e50; color: white; padding: 30px;">
            <h3>Documento generado el: <span id="fecha"></span></h3>
            <p>Proyecto desarrollado para el curso de Java EE</p>
        </div>
    </div>

    <script>
        document.getElementById('fecha').textContent = new Date().toLocaleString('es-ES');
    </script>
</body>
</html>
